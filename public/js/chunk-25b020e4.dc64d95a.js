(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25b020e4"],{ae40:function(e,t,n){var a=n("83ab"),c=n("d039"),i=n("5135"),o=Object.defineProperty,r={},u=function(e){throw e};e.exports=function(e,t){if(i(r,e))return r[e];t||(t={});var n=[][e],s=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:u,d=i(t,1)?t[1]:void 0;return r[e]=!!n&&!c((function(){if(s&&!a)return!0;var e={length:-1};s?o(e,1,{enumerable:!0,get:u}):e[1]=1,n.call(e,l,d)}))}},b0c0:function(e,t,n){var a=n("83ab"),c=n("9bf2").f,i=Function.prototype,o=i.toString,r=/^\s*function ([^ (]*)/,u="name";a&&!(u in i)&&c(i,u,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(e){return""}}})},b727:function(e,t,n){var a=n("0366"),c=n("44ad"),i=n("7b0b"),o=n("50c4"),r=n("65f0"),u=[].push,s=function(e){var t=1==e,n=2==e,s=3==e,l=4==e,d=6==e,f=5==e||d;return function(v,h,m,p){for(var b,_,k=i(v),g=c(k),x=a(h,m,3),w=o(g.length),y=0,C=p||r,A=t?C(v,w):n?C(v,0):void 0;w>y;y++)if((f||y in g)&&(b=g[y],_=x(b,y,k),e))if(t)A[y]=_;else if(_)switch(e){case 3:return!0;case 5:return b;case 6:return y;case 2:u.call(A,b)}else if(l)return!1;return d?-1:s||l?l:A}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},c740:function(e,t,n){"use strict";var a=n("23e7"),c=n("b727").findIndex,i=n("44d2"),o=n("ae40"),r="findIndex",u=!0,s=o(r);r in[]&&Array(1)[r]((function(){u=!1})),a({target:"Array",proto:!0,forced:u||!s},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),i(r)},eae0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"text-center"},[e._v("Dispositivos")]),n("b-table",{staticClass:"mt-4",attrs:{striped:"",hover:"",items:e.devices,fields:e.devices_fields},scopedSlots:e._u([{key:"cell(opened)",fn:function(e){return[n("font-awesome-icon",{attrs:{icon:e.value?"door-open":"door-closed",size:"lg"}})]}},{key:"cell(created_at)",fn:function(t){return[e._v(" "+e._s(e.$moment(t.value).format("DD/MM/YYYY HH:mm:ss"))+" ")]}},{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.value)+" "),n("font-awesome-icon",{staticClass:"cursor-pointer",attrs:{icon:"edit"},on:{click:function(n){return e.openUpdateNameModal(t.item)}}})]}},{key:"cell(in_alert)",fn:function(t){return[n("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:function(n){return e.updateAlert(t.item,!t.value)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"row.value"}})]}},{key:"cell(authorized)",fn:function(t){return[n("b-form-checkbox",{attrs:{name:"check-button",switch:""},on:{change:function(n){return e.updateAuthorized(t.item,!t.value)}},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"row.value"}})]}}])}),n("UpdateNameModal",{ref:"update_name_modal"})],1)},c=[],i=(n("99af"),n("c740"),n("bc3a")),o=n.n(i),r=n("6221"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"update_name",title:"Atualizar Nome","ok-title":"Atualizar","cancel-title":"Cancelar"},on:{ok:e.updateDeviceName}},[n("b-form",[n("b-form-input",{model:{value:e.device.name,callback:function(t){e.$set(e.device,"name",t)},expression:"device.name"}})],1)],1)},s=[],l=(n("b0c0"),{data:function(){return{device:{}}},methods:{showModal:function(e){this.device=e,this.$bvModal.show("update_name")},updateDeviceName:function(){o.a.put("".concat(r["a"],"/api/devices/").concat(this.device.id,".json"),{name:this.device.name}).catch((function(e){console.log(e)}))}}}),d=l,f=n("2877"),v=Object(f["a"])(d,u,s,!1,null,null,null),h=v.exports,m={data:function(){return{devices_fields:[{key:"opened",label:"Status Porta",class:"text-center"},{key:"name",label:"Nome"},{key:"mac",label:"MAC"},{key:"created_at",label:"Data Criação"},{key:"authorized",label:"Autorizado",class:"text-center"},{key:"in_alert",label:"Em Alerta",class:"text-center"}],devices:[]}},created:function(){this.getDevices(),this.$cable.subscribe({channel:"MeasurementChannel",room:"public",user_id:this.$auth.user().id})},channels:{MeasurementChannel:{connected:function(){},received:function(e){this.deviceOpenedChanged(e.device_id,e.opened)}}},components:{UpdateNameModal:h},methods:{getDevices:function(){var e=this;o.a.get("".concat(r["a"],"/api/devices.json")).then((function(t){e.devices=t.data})).catch((function(e){console.log(e)}))},updateAlert:function(e,t){var n=this;o.a.put("".concat(r["a"],"/api/devices/").concat(e.id,".json"),{in_alert:t}).then((function(t){var a=n.devices.findIndex((function(t){return t.id==e.id}));n.devices[a]=t.data})).catch((function(e){console.log(e)}))},updateAuthorized:function(e,t){var n=this;o.a.put("".concat(r["a"],"/api/devices/").concat(e.id,".json"),{authorized:t}).then((function(t){var a=n.devices.findIndex((function(t){return t.id==e.id}));n.devices[a]=t.data})).catch((function(e){console.log(e)}))},openUpdateNameModal:function(e){this.$refs.update_name_modal.showModal(e)},deviceOpenedChanged:function(e,t){var n=this.devices.findIndex((function(t){return t.id==e}));this.devices[n].opened=t}}},p=m,b=Object(f["a"])(p,a,c,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-25b020e4.dc64d95a.js.map